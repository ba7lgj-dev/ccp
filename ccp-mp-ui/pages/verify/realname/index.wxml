<view class="page">
  <view class="tip">完成实名认证后即可使用拼车功能</view>
  <view wx:if="{{loading}}" class="loading">加载中...</view>
  <view wx:else>
    <view class="status-card status-{{realAuthStatus}}">
      <view class="status-title">{{statusText}}</view>
      <view class="status-desc">{{statusDesc}}</view>
    </view>

    <view class="form-card">
      <view class="form-item">
        <view class="label">真实姓名</view>
        <input class="input" placeholder="请输入真实姓名" value="{{realName}}" bindinput="onRealNameInput" disabled="{{realAuthStatus==1 || realAuthStatus==2}}" />
      </view>
      <view class="form-item">
        <view class="label">身份证号</view>
        <input class="input" placeholder="{{idCardPlaceholder || '请输入15或18位身份证号'}}" value="{{idCardNumber}}" bindinput="onIdCardInput" disabled="{{realAuthStatus==1 || realAuthStatus==2}}" />
      </view>
      <view class="upload-section">
        <view class="label">本人照片（可选）</view>
        <image wx:if="{{faceImageUrl}}" class="preview" src="{{faceImageUrl}}" mode="aspectFill"></image>
        <button class="upload-btn" bindtap="onChooseImage" disabled="{{realAuthStatus==1 || realAuthStatus==2}}">上传本人照片</button>
      </view>
    </view>

    <view class="action-area" wx:if="{{realAuthStatus==0 || realAuthStatus==3}}">
      <button class="submit" type="primary" loading="{{submitting}}" disabled="{{submitting}}" bindtap="onSubmit">提交审核</button>
    </view>
    <view class="hint" wx:if="{{realAuthStatus==1}}">审核中，请稍后再来查看结果。</view>
    <view class="hint" wx:if="{{realAuthStatus==2}}">如需修改实名信息，请联系客服或管理员。</view>
    <view class="action-area" wx:if="{{realAuthStatus==2}}">
      <button class="submit" type="primary" bindtap="goSchoolAuth">去学校认证</button>
      <button class="secondary" bindtap="goHome">返回首页</button>
    </view>
  </view>
</view>
