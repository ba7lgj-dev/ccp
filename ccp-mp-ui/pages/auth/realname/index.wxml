<view class="container">
  <view class="user-card">
    <image class="avatar" src="{{userInfo.avatarUrl || '/assets/logo.png'}}" mode="aspectFill"></image>
    <view class="user-info">
      <text class="nick">{{userInfo.nickName || '未登录'}}</text>
      <text class="desc">实名认证后才能继续使用拼车功能</text>
    </view>
  </view>

  <view class="form-section">
    <view class="form-item">
      <text class="label">真实姓名</text>
      <input class="input" value="{{realName}}" placeholder="请输入真实姓名" bindinput="handleNameInput" disabled="{{realAuthStatus===1||realAuthStatus===2}}" />
    </view>
    <view class="form-item">
      <text class="label">身份证号</text>
      <input class="input" value="{{idCardNumber}}" placeholder="请输入身份证号" bindinput="handleIdInput" type="idcard" disabled="{{realAuthStatus===1||realAuthStatus===2}}" />
    </view>
    <view class="form-item upload">
      <text class="label">证件照片</text>
      <view class="upload-box">
        <block wx:if="{{faceImageUrl}}">
          <image class="upload-preview" src="{{faceImageFullUrl}}" mode="aspectFill" bindtap="previewImage"></image>
        </block>
        <block wx:else>
          <button class="upload-btn" type="default" size="mini" bindtap="chooseImage" disabled="{{realAuthStatus===1||realAuthStatus===2}}">上传证件照片</button>
        </block>
      </view>
    </view>
  </view>

  <view class="status-section">
    <block wx:if="{{realAuthStatus===0}}">
      <text class="hint">请填写真实姓名、身份证号并上传证件照片，提交后等待管理员审核。</text>
      <button class="primary" type="primary" loading="{{submitLoading}}" bindtap="submitRealAuth">提交认证</button>
    </block>
    <block wx:elif="{{realAuthStatus===1}}">
      <text class="warning">已提交，等待审核中，请耐心等待。</text>
    </block>
    <block wx:elif="{{realAuthStatus===2}}">
      <text class="success">实名认证已通过。</text>
      <button class="primary" type="primary" bindtap="goHome">返回首页</button>
    </block>
    <block wx:elif="{{realAuthStatus===3}}">
      <text class="error">审核未通过：{{failReason || '请重新提交'}}</text>
      <button class="primary" type="primary" loading="{{submitLoading}}" bindtap="submitRealAuth">重新提交</button>
    </block>
  </view>
</view>
